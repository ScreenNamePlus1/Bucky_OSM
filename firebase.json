rules_version = '2';
  service cloud.firestore {
    match /databases/{database}/documents {
      match /users/{userId} {
        allow read: if request.auth.uid == userId;
        allow write: if request.auth.uid == userId;
      }
      match /requests/{requestId} {
        allow read: if request.auth.uid == resource.data.customerId || resource.data.driverId == request.auth.uid;
        allow write: if request.auth.uid == resource.data.customerId || resource.data.driverId == request.auth.uid;
      }
      match /bids/{bidId} {
        allow read: if request.auth.uid == resource.data.driverId || exists(/databases/$(database)/documents/requests/$(resource.data.requestId)/customerId, request.auth.uid);
        allow write: if request.auth.uid == resource.data.driverId;
      }
    }
  }